<!--
  Generated template for the GroupChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <div class="dropdown" style="float: right; margin-right: 20px; margin-top: 12px;">

      <ion-icon class="dropdown-toggle" data-toggle="dropdown" name="more" style="color:#fff"></ion-icon>
      <ul class="dropdown-menu dropdown-right" style="margin-top: 19px !important;">
        <li><a href="#" (click)="goToGroupInfo()" style="padding:7px 20px">{{'view-group-info' | translate}}</a></li>
        <li><a href="#" (click)="Clear_Conversation()" style="padding:7px 20px">{{'clear-conversation' | translate}}</a></li>
        <li><a href="#" (click)="Report_Conversation()" style="padding:7px 20px">{{'report-conversation' | translate}}</a></li>
        <!-- <li  *ngIf="is_blocked==false"><a href="#"  (click)="Block(currentUserID)" style="padding:7px 20px">Block</a></li>
					  <li *ngIf="is_blocked==true"><a href="#"  (click)="unBlock(currentUserID)" style="padding:7px 20px">Unblock</a></li> -->
      </ul>
    </div>
    <div>
      <ion-title>
        <div style="float:left;text-align:left;">
          <div style="margin-right:5px;float:left;width:25px;height:25px;"> </div>
          <span (click)="goToGroupInfo()" style="font-size:16px;text-align:center;position:relative;">{{title}}</span>
        </div>
      </ion-title>
    </div>
    <ion-icon class="headerico" name="ios-call" (click)="call()"></ion-icon>
    <ion-icon class="headerico" name="ios-videocam" (click)="video()"></ion-icon>

    <h5 style="color:gray;margin-top:11px;margin-left:30px">
      {{lastonline}}
    </h5>

  </ion-navbar>

</ion-header>


<ion-content>
  <main class="page pt-70 bg_white" #scrollMe [scrollTop]="scrollMe.scrollHeight" style='overflow:scroll;overflow-x:hidden;max-height:200px;'>
    <div class="rec-btn">
      <div>
        <div style="text-align: center; display: table; margin: auto; color: #fff;">03:13</div>
        <button class="rec" style="text-align: center; display: table; margin: 20px auto 30px;"></button>
        <div style="margin-top:15px;width:100%;display:flex;justify-content:center;">
          <a class="btn btn-danger  remove-class" href="#" (click)="remove()" style="padding: 4px 8px;margin: 0 5px;">{{'cancel' | translate}}</a>
          <a class="btn btn-theme  send-class " (click)="sendaudio()" href="#" style="padding: 4px 8px;margin: 0 5px;">{{'send' | translate}}</a>
        </div>
      </div>
    </div>
    <div class="chat_room full_vh">
      <div class="chat_room_body">
        <div class="container">
          <!-- <section class="chat_body"> -->
          <!-- Messages -->
          <div class="msgs chat">
            <!-- <p>ddddd{{y}}</p> -->
            <div *ngFor="let p of messages" (click)="d(p)">
              <div class="sender_msg " *ngIf="p.from_me == false">
                <div class="msg_box sender" *ngIf="p.image!='' && p.text==''">
                  <h4>{{title}} 	 </h4>
                  <img [src]="p.image" style=" width: 500px; height: 200px;">
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                  <time>{{p.time}}</time>
                  <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                </i>
                <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                </div>
                <div class="msg_box reciever" *ngIf="p.text!='' && p.image==''">
                  <div class="text_box">
                    <p>{{p.text}}</p>
                    <!-- <a href="{{p.text}}"> {{p.text}}</a> -->
                    <!--<i class="ion-android-checkbox-outline"></i>-->
                    <time>{{p.time}}</time>
                    <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                  </i>
                  <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                  </div>
                </div>
                <div class="msg_box reciever" *ngIf="p.avatar!='' && p.image=='' && p.text==''">
                  <!-- <p>{{p.text}}</p> -->
                  <a href="{{p.avatar}}"> {{p.avatar}}</a>
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                  <time>{{p.time}}</time>
                  <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                  </i>
                  <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                </div>

              </div>
              <div class="reciever_msg right_side" *ngIf="p.from_me == true">
                <div class="msg_box reciever" *ngIf="p.image!='' && p.text==''">
                  <img [src]="p.image" style="width: 500px; height: 200px;">
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                  <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                    </i>
                    <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                  <time>{{p.time}}</time>
                </div>
                <div class="msg_box reciever" *ngIf="p.text!='' && p.image==''">
                  <div class="text_box">
                    <p>{{p.text}}</p>
                    <!-- <a href="{{p.text}}"> {{p.text}}</a> -->
                    <!--<i class="ion-android-checkbox-outline"></i>-->
                    <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                </i>
                <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                    <time>{{p.time}}</time>
                  </div>
                </div>
                <div class="msg_box reciever" *ngIf="p.avatar!='' && p.image=='' && p.text==''">
                  <h4></h4>
                  <!-- <p>{{p.text}}</p> -->
                  <!-- <a href="/images/myw3schoolsimage.jpg" download>
                    Try it rself Â»
                  </a> -->
                  <a href="{{p.avatar}}"> {{p.avatar}}</a>
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                  <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                </i>
                <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                  <time>{{p.time}}</time>
                </div>
              </div>
            </div>
          </div>
          <!-- </section> -->
        </div>
      </div>
    </div>
  </main>

  <ion-footer>
    <div class="message-box" *ngIf='is_blocked == false || !is_blocked'>
        <div class="container chat-message-box">
          <div class="dropdown">
            <ul class="dropdown-menu dropdown-menu-right">
              <!-- <li><a href="#"><i class="ion-easel"></i> Share a Whiteboard</a></li>
									<li><a href="#"><i class="ion-android-document"></i> Collaborative Document</a></li> -->
              <li (click)="handWriting()"><a href="#"><img style="width:19px;height:19px;"  src="./assets/images/svg/pencil-writing-tool.svg"/>  {{'handwrite-a-message' | translate}}</a></li>
            </ul>
          </div>
          <div class="toggle-icons" style="justify-content:space-around!important;padding-right:10px;">
            <a (click)="pickimg()" href="#"><img style="width:19px;height:19px;"  src="./assets/images/svg/006-image.svg"/></a>
            <a href="#" (click)="selectfile()"><img style="width:19px;height:19px;"  src="./assets/images/svg/005-video.svg"/></a>
            <!-- <img name="s" (click)="toggled = !toggled" style="width:19px;height:19px;" [(emojiPickerIf)]="toggled" (emojiPickerSelect)="handleSelection($event)" src="./assets/images/svg/001-happiness.svg" /> -->
            <a href="#" (click)="location()"><img style="width:19px;height:19px;"  src="./assets/images/svg/004-placeholder.svg"/></a>
            <a href="#"><img style="width:19px;height:19px;"  class="ion-more" src="./assets/images/svg/more.svg"/></a>
          </div>
          <div class="type-message">
            <a href="#" (click)="dropdown()" class="toggle-arrow">
									<img style="width:19px;height:19px;margin-left:7px;margin-top:7px;" src="./assets/images/svg/sort-up.svg"/>
									<img style="width:19px;height:19px;margin-left:7px;margin-top:7px;" src="./assets/images/svg/sort-down.svg"/>
								</a>
            <input type="text" name="msg" placeholder="Type Message......" (keypress)="onfocus()" (focusout)="focusout()" [(ngModel)]="emojitext" name="email">

            <a href="#" (click)="presentPopover()"><i class="ion-ios-mic"></i></a>
            <div class="button">
              <button (click)="send()">
                <ion-icon name="md-send"></ion-icon>
              </button>
            </div>
          </div>
        </div>
    </div>
  </ion-footer>
</ion-content>
